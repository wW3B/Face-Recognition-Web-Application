<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>Face Attendance</title>

  <!-- Bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <style>
    body {
      background: #0f172a; /* น้ำเงินเข้มแบบดาร์กโหมด */
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .navbar-brand {
      font-weight: 700;
      letter-spacing: .03em;
    }
    .hero-title {
      font-size: 2.3rem;
      font-weight: 800;
      color: #f9fafb;
    }
    .hero-sub {
      color: #9ca3af;
      font-size: .98rem;
    }
    .card {
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,.25);
      background: radial-gradient(circle at top left, #1f2937 0, #020617 45%, #000 100%);
      box-shadow: 0 25px 60px rgba(15,23,42,.8);
    }
    .badge-live {
      background: #ef4444;
      border-radius: 999px;
      padding: .25rem .7rem;
      font-size: .75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .07em;
    }
    .footer-text {
      font-size: .8rem;
      color: #6b7280;
    }
    a {
      text-decoration: none;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-dark border-bottom border-secondary border-opacity-25">
    <div class="container py-2">
      <span class="navbar-brand d-flex align-items-center gap-2">
        <span class="rounded-circle bg-success d-inline-block" style="width:10px;height:10px;"></span>
        Face Attendance System
      </span>
      <div class="d-flex gap-2">
        <a href="{{ url_for('index') }}" class="btn btn-sm btn-outline-light">กล้องสด</a>
        <a href="/enroll" class="btn btn-sm btn-outline-info">ลงทะเบียนใบหน้า</a>
        <a href="{{ url_for('logs') }}" class="btn btn-sm btn-warning text-dark">ประวัติการเช็คชื่อ</a>
      </div>
    </div>
  </nav>

  <!-- Main content -->
  <div class="container py-4">
    <div class="row g-4 align-items-start">
      <!-- Left: video card -->
      <div class="col-lg-7">
        <div class="card p-3 p-md-4">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <div>
              <div class="badge-live">Live</div>
              <h1 class="hero-title mt-2 mb-1">Face Attendance</h1>
              <p class="hero-sub mb-0">
                ระบบเช็คชื่อด้วยใบหน้าแบบ Real-time ผ่านกล้องเว็บแคมของคุณ
              </p>
            </div>
          </div>

          <div class="mt-3">
            <img src="{{ url_for('video_feed') }}"
                 class="img-fluid rounded-4 border border-secondary border-opacity-50"
                 alt="camera stream" />
          </div>

          <div class="mt-3 small text-secondary">
            • เส้นกรอบสีเขียว = ระบบรู้จักใบหน้านั้นแล้ว<br>
            • ถ้าอยากเพิ่มคนใหม่ ให้ใช้สคริปต์ลงทะเบียน (enroll) ที่ VS Code
          </div>
        </div>
      </div>

      <!-- Right: info panel -->
      <div class="col-lg-5">
        <div class="card p-3 p-md-4 h-100">
          <h2 class="h5 text-light mb-3">สรุประบบ</h2>
          <ul class="small text-secondary mb-3">
            <li>ใช้ Siamese Network + EfficientNet สำหรับเปรียบเทียบใบหน้า (Few-shot Learning)</li>
            <li>เปรียบเทียบใบหน้าจริงกับฐานข้อมูล embedding ใน <code>face_db.pt</code></li>
            <li>บันทึกเวลาเช็คชื่อทุกครั้งลงไฟล์ <code>attendance.csv</code></li>
          </ul>

          <hr class="border-secondary border-opacity-50">

          <p class="small text-light fw-semibold mb-1">เมนูลัด</p>
          <div class="d-grid gap-2">
            <a href="{{ url_for('logs') }}" class="btn btn-warning text-dark fw-semibold">
              ดูประวัติการเช็คชื่อทั้งหมด
            </a>
          </div>

          <div class="mt-4 footer-text">
            Tip: สำหรับโชว์อาจารย์ คุณสามารถเปิดหน้านี้พร้อมแสดงไฟล์ <code>attendance.csv</code>
            ให้ดูว่าเมื่อระบบรู้จักใบหน้าแล้วจะบันทึกเวลาเช็คชื่อให้โดยอัตโนมัติ
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
