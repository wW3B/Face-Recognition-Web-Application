<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>Attendance Logs</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <style>
    body {
      background: #020617;
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .navbar-brand {
      font-weight: 700;
      letter-spacing: .03em;
    }
    .table thead th {
      background: #111827;
      color: #e5e7eb;
      border-color: #1f2937;
    }
    .table tbody tr {
      border-color: #111827;
    }
    .pill {
      border-radius: 999px;
      padding: .15rem .7rem;
      font-size: .75rem;
      font-weight: 600;
    }
    .pill-in {
      background: rgba(34,197,94,.12);
      color: #4ade80;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-dark border-bottom border-secondary border-opacity-25 mb-3">
    <div class="container py-2">
      <span class="navbar-brand">Face Attendance – Logs</span>
      <div class="d-flex gap-2">
        <a href="{{ url_for('index') }}" class="btn btn-sm btn-outline-light">กลับหน้ากล้องสด</a>
      </div>
    </div>
  </nav>

  <div class="container py-3">
    <h1 class="h4 mb-3">ประวัติการเช็คชื่อ</h1>

    <div class="table-responsive shadow rounded-3 border border-secondary border-opacity-25">
      <table class="table table-dark table-hover align-middle mb-0">
        <thead>
          <tr>
            <th style="width: 5%;">#</th>
            <th>ชื่อ / ID</th>
            <th>วัน-เวลา</th>
            <th style="width: 15%;">สถานะ</th>
          </tr>
        </thead>
        <tbody>
          {% if rows|length > 1 %}
            {% for row in rows[1:] %}  {# ข้าม header แถวแรก #}
              <tr>
                <td>{{ loop.index }}</td>
                <td>{{ row[0] }}</td>
                <td>{{ row[1] }}</td>
                <td>
                  {% if row[2] == "check-in" %}
                    <span class="pill pill-in">Check-in</span>
                  {% else %}
                    <span class="pill pill-in">{{ row[2] }}</span>
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="4" class="text-center text-secondary py-4">
                ยังไม่มีข้อมูลการเช็คชื่อ
              </td>
            </tr>
          {% endif %}
        </tbody>
      </table>
    </div>

    <p class="mt-3 small text-secondary">
      ไฟล์ข้อมูลถูกเก็บใน <code>attendance.csv</code> ภายในโฟลเดอร์โปรเจกต์
    </p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
